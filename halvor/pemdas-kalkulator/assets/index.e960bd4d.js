(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const t of l.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&c(t)}).observe(document,{childList:!0,subtree:!0});function o(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(i){if(i.ep)return;i.ep=!0;const l=o(i);fetch(i.href,l)}})();const s=document.getElementById("input"),m=document.getElementById("output");s.focus();setTimeout(()=>{s.focus()},1);s.addEventListener("blur",()=>{s.focus(),setTimeout(()=>{s.focus()},1)});s.addEventListener("input",()=>{let r=s.value.replace(/[^0-9\(\)\+\-\*\/\^\.]/g,"");if(r=r.replace(/\*\*/g,"^"),r=r.replace(/,/g,"."),r.startsWith("*")||r.startsWith("/")||r.startsWith("^"))return;const e=u(r);m.innerText=e.toString(),console.log(e)});s.addEventListener("keydown",r=>{r.key==="Backspace"||r.key==="Delete"||r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key.match(/[^0-9\(\)\+\-\*\/\^\.]/g)&&r.preventDefault()});function u(r){let e=Array.from(r),o=[];if(e.forEach((t,n)=>{isNaN(Number(t))?(o.push(t),o.push("")):n===0?o.push(t):o[o.length-1]+=t}),console.log(o),o=o.filter(t=>t!==""),e=o,e.includes("(")&&e.includes(")")&&e.filter(n=>n==="("||n===")").length>0){let n=e.indexOf("("),f=e.indexOf(")"),d=e.slice(n+1,f).join(""),a=u(d);return e.splice(n,f-n+1,a.toString()),u(e.join(""))}if(e.filter(t=>t==="^").length>0){let t=e.indexOf("^"),n=Number(e[t-1]),f=Number(e[t+1]),d=Math.pow(n,f);return e.splice(t-1,3,d.toString()),u(e.join(""))}if(e.filter(t=>t==="*"||t==="/").length>0){let t=e.indexOf("*");t===-1&&(t=e.indexOf("/"));let n=0;return e[t]==="*"?n=Number(e[t-1])*Number(e[t+1]):n=Number(e[t-1])/Number(e[t+1]),e.splice(t-1,3,n.toString()),u(e.join(""))}if(e.filter(t=>t==="+"||t==="-").length>0){let t=e.indexOf("+");t===-1&&(t=e.indexOf("-"));let n=0;return e[t]==="+"?n=Number(e[t-1])+Number(e[t+1]):n=Number(e[t-1])-Number(e[t+1]),e.splice(t-1,3,n.toString()),u(e.join(""))}return Number(e.join(""))}
